!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-array"),require("d3-collection"),require("d3-interpolate"),require("d3-selection"),require("d3-transition"),require("d3-dispatch"),require("d3-format")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-collection","d3-interpolate","d3-selection","d3-transition","d3-dispatch","d3-format"],n):n(t.d3=t.d3||{},t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3)}(this,function(t,n,e,r,o,i,a,u){"use strict";function c(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function s(t,n){return n={exports:{}},t(n,n.exports),n.exports}function f(){this.__data__=[],this.size=0}function d(t,n){return t===n||t!==t&&n!==n}function h(t,n){for(var e=t.length;e--;)if(ao(t[e][0],n))return e;return-1}function l(t){var n=this.__data__,e=uo(n,t);return!(e<0)&&(e==n.length-1?n.pop():so.call(n,e,1),--this.size,!0)}function p(t){var n=this.__data__,e=uo(n,t);return e<0?void 0:n[e][1]}function v(t){return uo(this.__data__,t)>-1}function y(t,n){var e=this.__data__,r=uo(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this}function g(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function b(){this.__data__=new vo,this.size=0}function _(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function m(t){return this.__data__.get(t)}function w(t){return this.__data__.has(t)}function E(t){var n=Oo.call(t,Po),e=t[Po];try{t[Po]=void 0;var r=!0}catch(t){}var o=No.call(t);return r&&(n?t[Po]=e:delete t[Po]),o}function j(t){return Co.call(t)}function x(t){return null==t?void 0===t?Do:zo:Fo&&Fo in Object(t)?Lo(t):So(t)}function k(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}function M(t){if(!To(t))return!1;var n=Uo(t);return n==Bo||n==Go||n==Vo||n==qo}function A(t){return!!Yo&&Yo in t}function O(t){if(null!=t){try{return Jo.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function N(t){return!(!To(t)||Zo(t))&&(Ro(t)?oi:Ho).test(Ko(t))}function P(t,n){return null==t?void 0:t[n]}function L(t,n){var e=ai(t,n);return ii(e)?e:void 0}function I(){this.__data__=di?di(null):{},this.size=0}function C(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function S(t){var n=this.__data__;if(di){var e=n[t];return e===pi?void 0:e}return yi.call(n,t)?n[t]:void 0}function z(t){var n=this.__data__;return di?void 0!==n[t]:_i.call(n,t)}function D(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=di&&void 0===n?wi:n,this}function F(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function U(){this.size=0,this.__data__={hash:new ji,map:new(si||vo),string:new ji}}function T(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}function V(t,n){var e=t.__data__;return ki(n)?e["string"==typeof n?"string":"hash"]:e.map}function B(t){var n=Mi(this,t).delete(t);return this.size-=n?1:0,n}function G(t){return Mi(this,t).get(t)}function q(t){return Mi(this,t).has(t)}function R(t,n){var e=Mi(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this}function W(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function $(t,n){var e=this.__data__;if(e instanceof vo){var r=e.__data__;if(!si||r.length<Ii-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new Li(r)}return e.set(t,n),this.size=e.size,this}function Y(t){var n=this.__data__=new vo(t);this.size=n.size}function Z(t,n){for(var e=-1,r=null==t?0:t.length;++e<r&&!1!==n(t[e],e,t););return t}function X(t,n,e){"__proto__"==n&&Fi?Fi(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function J(t,n,e){var r=t[n];Vi.call(t,n)&&ao(r,e)&&(void 0!==e||n in t)||Ui(t,n,e)}function K(t,n,e,r){var o=!e;e||(e={});for(var i=-1,a=n.length;++i<a;){var u=n[i],c=r?r(e[u],t[u],u,e,t):void 0;void 0===c&&(c=t[u]),o?Ui(e,u,c):Bi(e,u,c)}return e}function Q(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}function H(t){return null!=t&&"object"==typeof t}function tt(t){return Ri(t)&&Uo(t)==Wi}function nt(){return!1}function et(t,n){var e=typeof t;return!!(n=null==n?ea:n)&&("number"==e||"symbol"!=e&&ra.test(t))&&t>-1&&t%1==0&&t<n}function rt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ia}function ot(t){return Ri(t)&&aa(t.length)&&!!ua[Uo(t)]}function it(t){return function(n){return t(n)}}function at(t,n){var e=Hi(t),r=!e&&Ki(t),o=!e&&!r&&na(t),i=!e&&!r&&!o&&la(t),a=e||r||o||i,u=a?qi(t.length,String):[],c=u.length;for(var s in t)!n&&!va.call(t,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||oa(s,c))||u.push(s);return u}function ut(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||ga)}function ct(t,n){return function(e){return t(n(e))}}function st(t){if(!ba(t))return wa(t);var n=[];for(var e in Object(t))ja.call(t,e)&&"constructor"!=e&&n.push(e);return n}function ft(t){return null!=t&&aa(t.length)&&!Ro(t)}function dt(t){return ka(t)?ya(t):xa(t)}function ht(t,n){return t&&Gi(n,Ma(n),t)}function lt(t){var n=[];if(null!=t)for(var e in Object(t))n.push(e);return n}function pt(t){if(!To(t))return Oa(t);var n=ba(t),e=[];for(var r in t)("constructor"!=r||!n&&Pa.call(t,r))&&e.push(r);return e}function vt(t){return ka(t)?ya(t,!0):La(t)}function yt(t,n){return t&&Gi(n,Ia(n),t)}function gt(t,n){var e=-1,r=t.length;for(n||(n=Array(r));++e<r;)n[e]=t[e];return n}function bt(t,n){for(var e=-1,r=null==t?0:t.length,o=0,i=[];++e<r;){var a=t[e];n(a,e,t)&&(i[o++]=a)}return i}function _t(){return[]}function mt(t,n){return Gi(t,Ga(t),n)}function wt(t,n){for(var e=-1,r=n.length,o=t.length;++e<r;)t[o+e]=n[e];return t}function Et(t,n){return Gi(t,Xa(t),n)}function jt(t,n,e){var r=n(t);return Hi(t)?r:Ra(r,e(t))}function xt(t){return Ka(t,Ma,Ga)}function kt(t){return Ka(t,Ia,Xa)}function Mt(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&yu.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function At(t){var n=new t.constructor(t.byteLength);return new _u(n).set(new _u(t)),n}function Ot(t,n){var e=n?mu(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}function Nt(t){var n=new t.constructor(t.source,Eu.exec(t));return n.lastIndex=t.lastIndex,n}function Pt(t){return ku?Object(ku.call(t)):{}}function Lt(t,n){var e=n?mu(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function It(t,n,e){var r=t.constructor;switch(n){case Du:return mu(t);case Ou:case Nu:return new r(+t);case Fu:return wu(t,e);case Uu:case Tu:case Vu:case Bu:case Gu:case qu:case Ru:case Wu:case $u:return Au(t,e);case Pu:return new r;case Lu:case Su:return new r(t);case Iu:return ju(t);case Cu:return new r;case zu:return Mu(t)}}function Ct(t){return"function"!=typeof t.constructor||ba(t)?{}:Ju($a(t))}function St(t){return Ri(t)&&pu(t)==Qu}function zt(t){return Ri(t)&&pu(t)==rc}function Dt(t,n,e,r,o,i){var a,u=n&cc,c=n&sc,s=n&fc;if(e&&(a=o?e(t,r,o,i):e(t)),void 0!==a)return a;if(!To(t))return t;var f=Hi(t);if(f){if(a=gu(t),!u)return za(t,a)}else{var d=pu(t),h=d==hc||d==lc;if(na(t))return Sa(t,u);if(d==pc||d==dc||h&&!o){if(a=c||h?{}:Ku(t),!u)return c?Ja(t,Ca(a,t)):qa(t,Aa(a,t))}else{if(!vc[d])return o?t:{};a=Yu(t,d,u)}}i||(i=new Si);var l=i.get(t);if(l)return l;if(i.set(t,a),uc(t))return t.forEach(function(r){a.add(Dt(r,n,e,r,t,i))}),a;if(ec(t))return t.forEach(function(r,o){a.set(o,Dt(r,n,e,o,t,i))}),a;var p=s?c?Ha:Qa:c?keysIn:Ma,v=f?void 0:p(t);return zi(v||t,function(r,o){v&&(o=r,r=t[o]),Bi(a,o,Dt(r,n,e,o,t,i))}),a}function Ft(t){return yc(t,gc)}function Ut(t){return function(){return t}}function Tt(t){return function(n,e,r){for(var o=-1,i=Object(n),a=r(n),u=a.length;u--;){var c=a[t?u:++o];if(!1===e(i[c],c,i))break}return n}}function Vt(t,n){return t&&Ec(t,n,Ma)}function Bt(t,n){return function(e,r){if(null==e)return e;if(!ka(e))return t(e,r);for(var o=e.length,i=n?o:-1,a=Object(e);(n?i--:++i<o)&&!1!==r(a[i],i,a););return e}}function Gt(t){return t}function qt(t){return"function"==typeof t?t:Ac}function Rt(t,n){return(Hi(t)?zi:Mc)(t,Oc(n))}function Wt(t,n){var e=[];return Mc(t,function(t,r,o){n(t,r,o)&&e.push(t)}),e}function $t(t){return this.__data__.set(t,Ic),this}function Yt(t){return this.__data__.has(t)}function Zt(t){var n=-1,e=null==t?0:t.length;for(this.__data__=new Li;++n<e;)this.add(t[n])}function Xt(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}function Jt(t,n){return t.has(n)}function Kt(t,n,e,r,o,i){var a=e&Uc,u=t.length,c=n.length;if(u!=c&&!(a&&c>u))return!1;var s=i.get(t);if(s&&i.get(n))return s==n;var f=-1,d=!0,h=e&Tc?new zc:void 0;for(i.set(t,n),i.set(n,t);++f<u;){var l=t[f],p=n[f];if(r)var v=a?r(p,l,f,n,t,i):r(l,p,f,t,n,i);if(void 0!==v){if(v)continue;d=!1;break}if(h){if(!Dc(n,function(t,n){if(!Fc(h,n)&&(l===t||o(l,t,e,r,i)))return h.push(n)})){d=!1;break}}else if(l!==p&&!o(l,p,e,r,i)){d=!1;break}}return i.delete(t),i.delete(n),d}function Qt(t){var n=-1,e=Array(t.size);return t.forEach(function(t,r){e[++n]=[r,t]}),e}function Ht(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=t}),e}function tn(t,n,e,r,o,i,a){switch(e){case ns:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case ts:return!(t.byteLength!=n.byteLength||!i(new _u(t),new _u(n)));case Wc:case $c:case Xc:return ao(+t,+n);case Yc:return t.name==n.name&&t.message==n.message;case Jc:case Qc:return t==n+"";case Zc:var u=Bc;case Kc:var c=r&qc;if(u||(u=Gc),t.size!=n.size&&!c)return!1;var s=a.get(t);if(s)return s==n;r|=Rc,a.set(t,n);var f=Vc(u(t),u(n),r,o,i,a);return a.delete(t),f;case Hc:if(rs)return rs.call(t)==rs.call(n)}return!1}function nn(t,n,e,r,o,i){var a=e&is,u=Qa(t),c=u.length;if(c!=Qa(n).length&&!a)return!1;for(var s=c;s--;){var f=u[s];if(!(a?f in n:us.call(n,f)))return!1}var d=i.get(t);if(d&&i.get(n))return d==n;var h=!0;i.set(t,n),i.set(n,t);for(var l=a;++s<c;){f=u[s];var p=t[f],v=n[f];if(r)var y=a?r(v,p,f,n,t,i):r(p,v,f,t,n,i);if(!(void 0===y?p===v||o(p,v,e,r,i):y)){h=!1;break}l||(l="constructor"==f)}if(h&&!l){var g=t.constructor,b=n.constructor;g!=b&&"constructor"in t&&"constructor"in n&&!("function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b)&&(h=!1)}return i.delete(t),i.delete(n),h}function en(t,n,e,r,o,i){var a=Hi(t),u=Hi(n),c=a?ds:pu(t),s=u?ds:pu(n);c=c==fs?hs:c,s=s==fs?hs:s;var f=c==hs,d=s==hs,h=c==s;if(h&&na(t)){if(!na(n))return!1;a=!0,f=!1}if(h&&!f)return i||(i=new Si),a||la(t)?Vc(t,n,e,r,o,i):os(t,n,c,e,r,o,i);if(!(e&ss)){var l=f&&ps.call(t,"__wrapped__"),p=d&&ps.call(n,"__wrapped__");if(l||p){var v=l?t.value():t,y=p?n.value():n;return i||(i=new Si),o(v,y,e,r,i)}}return!!h&&(i||(i=new Si),cs(t,n,e,r,o,i))}function rn(t,n,e,r,o){return t===n||(null==t||null==n||!Ri(t)&&!Ri(n)?t!==t&&n!==n:vs(t,n,e,r,rn,o))}function on(t,n,e,r){var o=e.length,i=o,a=!r;if(null==t)return!i;for(t=Object(t);o--;){var u=e[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){u=e[o];var c=u[0],s=t[c],f=u[1];if(a&&u[2]){if(void 0===s&&!(c in t))return!1}else{var d=new Si;if(r)var h=r(s,f,c,t,n,d);if(!(void 0===h?ys(f,s,gs|bs,r,d):h))return!1}}return!0}function an(t){return t===t&&!To(t)}function un(t){for(var n=Ma(t),e=n.length;e--;){var r=n[e],o=t[r];n[e]=[r,o,ms(o)]}return n}function cn(t,n){return function(e){return null!=e&&(e[t]===n&&(void 0!==n||t in Object(e)))}}function sn(t){var n=ws(t);return 1==n.length&&n[0][2]?Es(n[0][0],n[0][1]):function(e){return e===t||_s(e,t,n)}}function fn(t){return"symbol"==typeof t||Ri(t)&&Uo(t)==xs}function dn(t,n){if(Hi(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!ks(t))||(As.test(t)||!Ms.test(t)||null!=n&&t in Object(n))}function hn(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError(Ns);var e=function(){var r=arguments,o=n?n.apply(this,r):r[0],i=e.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return e.cache=i.set(o,a)||i,a};return e.cache=new(hn.Cache||Li),e}function ln(t){var n=Ls(t,function(t){return e.size===Is&&e.clear(),t}),e=n.cache;return n}function pn(t,n){for(var e=-1,r=null==t?0:t.length,o=Array(r);++e<r;)o[e]=n(t[e],e,t);return o}function vn(t){if("string"==typeof t)return t;if(Hi(t))return Us(t,vn)+"";if(ks(t))return Bs?Bs.call(t):"";var n=t+"";return"0"==n&&1/t==-Ts?"-0":n}function yn(t){return null==t?"":Gs(t)}function gn(t,n){return Hi(t)?t:Os(t,n)?[t]:Fs(qs(t))}function bn(t){if("string"==typeof t||ks(t))return t;var n=t+"";return"0"==n&&1/t==-Ws?"-0":n}function _n(t,n){n=Rs(n,t);for(var e=0,r=n.length;null!=t&&e<r;)t=t[$s(n[e++])];return e&&e==r?t:void 0}function mn(t,n,e){var r=null==t?void 0:Ys(t,n);return void 0===r?e:r}function wn(t,n){return null!=t&&n in Object(t)}function En(t,n,e){n=Rs(n,t);for(var r=-1,o=n.length,i=!1;++r<o;){var a=$s(n[r]);if(!(i=null!=t&&e(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&aa(o)&&oa(a,o)&&(Hi(t)||Ki(t))}function jn(t,n){return null!=t&&Js(t,n,Xs)}function xn(t,n){return Os(t)&&ms(n)?Es($s(t),n):function(e){var r=Zs(e,t);return void 0===r&&r===n?Ks(e,t):ys(n,r,Qs|Hs)}}function kn(t){return function(n){return null==n?void 0:n[t]}}function Mn(t){return function(n){return Ys(n,t)}}function An(t){return Os(t)?nf($s(t)):ef(t)}function On(t){return"function"==typeof t?t:null==t?Ac:"object"==typeof t?Hi(t)?tf(t[0],t[1]):js(t):rf(t)}function Nn(t,n){return(Hi(t)?Da:Lc)(t,of(n,3))}function Pn(t,n){return null!=t&&cf.call(t,n)}function Ln(t,n){return null!=t&&Js(t,n,sf)}function In(t){if(null==t)return!0;if(ka(t)&&(Hi(t)||"string"==typeof t||"function"==typeof t.splice||na(t)||la(t)||Ki(t)))return!t.length;var n=pu(t);if(n==df||n==hf)return!t.size;if(ba(t))return!xa(t).length;for(var e in t)if(pf.call(t,e))return!1;return!0}function Cn(t){return void 0===t}function Sn(t,n){var e=-1,r=ka(t)?Array(t.length):[];return Mc(t,function(t,o,i){r[++e]=n(t,o,i)}),r}function zn(t,n){return(Hi(t)?Us:gf)(t,of(n,3))}function Dn(t,n,e,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(e=t[++o]);++o<i;)e=n(e,t[o],o,t);return e}function Fn(t,n,e,r,o){return o(t,function(t,o,i){e=r?(r=!1,t):n(e,t,o,i)}),e}function Un(t,n,e){var r=Hi(t)?_f:mf,o=arguments.length<3;return r(t,of(n,4),e,o,Mc)}function Tn(t){return"string"==typeof t||!Hi(t)&&Ri(t)&&Uo(t)==Ef}function Vn(t){return Mf.test(t)}function Bn(t){for(var n=Df.lastIndex=0;Df.test(t);)++n;return n}function Gn(t){return Af(t)?Ff(t):kf(t)}function qn(t){if(null==t)return 0;if(ka(t))return jf(t)?Uf(t):t.length;var n=pu(t);return n==Tf||n==Vf?t.size:xa(t).length}function Rn(t,n,e){var r=Hi(t),o=r||na(t)||la(t);if(n=of(n,4),null==e){var i=t&&t.constructor;e=o?r?new i:[]:To(t)&&Ro(i)?Ju($a(t)):{}}return(o?zi:jc)(t,function(t,r,o){return n(e,t,r,o)}),e}function Wn(t){return Hi(t)||Ki(t)||!!(qf&&t&&t[qf])}function $n(t,n,e,r,o){var i=-1,a=t.length;for(e||(e=Rf),o||(o=[]);++i<a;){var u=t[i];n>0&&e(u)?n>1?$n(u,n-1,e,r,o):Ra(o,u):r||(o[o.length]=u)}return o}function Yn(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function Zn(t,n,e){return n=Yf(void 0===n?t.length-1:n,0),function(){for(var r=arguments,o=-1,i=Yf(r.length-n,0),a=Array(i);++o<i;)a[o]=r[n+o];o=-1;for(var u=Array(n+1);++o<n;)u[o]=r[o];return u[n]=e(a),$f(t,this,u)}}function Xn(t){var n=0,e=0;return function(){var r=Hf(),o=Qf-(r-e);if(e=r,o>0){if(++n>=Kf)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}function Jn(t,n){return ed(Zf(t,n,Ac),t+"")}function Kn(t,n,e,r){for(var o=t.length,i=e+(r?1:-1);r?i--:++i<o;)if(n(t[i],i,t))return i;return-1}function Qn(t){return t!==t}function Hn(t,n,e){for(var r=e-1,o=t.length;++r<o;)if(t[r]===n)return r;return-1}function te(t,n,e){return n===n?ad(t,n,e):od(t,id,e)}function ne(t,n){return!!(null==t?0:t.length)&&ud(t,n,0)>-1}function ee(t,n,e){for(var r=-1,o=null==t?0:t.length;++r<o;)if(e(n,t[r]))return!0;return!1}function re(){}function oe(t,n,e){var r=-1,o=cd,i=t.length,a=!0,u=[],c=u;if(e)a=!1,o=sd;else if(i>=ld){var s=n?null:hd(t);if(s)return Gc(s);a=!1,o=Fc,c=new zc}else c=n?[]:u;t:for(;++r<i;){var f=t[r],d=n?n(f):f;if(f=e||0!==f?f:0,a&&d===d){for(var h=c.length;h--;)if(c[h]===d)continue t;n&&c.push(d),u.push(f)}else o(c,d,e)||(c!==u&&c.push(d),u.push(f))}return u}function ie(t){return Ri(t)&&ka(t)}function ae(t,n){return Us(n,function(n){return t[n]})}function ue(t){return null==t?[]:bd(t,Ma(t))}function ce(t){this._isDirected=!md.has(t,"directed")||t.directed,this._isMultigraph=!!md.has(t,"multigraph")&&t.multigraph,this._isCompound=!!md.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=md.constant(void 0),this._defaultEdgeLabelFn=md.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[jd]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function se(t,n){t[n]?t[n]++:t[n]=1}function fe(t,n){--t[n]||delete t[n]}function de(t,n,e,r){var o=""+n,i=""+e;if(!t&&o>i){var a=o;o=i,i=a}return o+xd+i+xd+(md.isUndefined(r)?Ed:r)}function he(t,n,e,r){var o=""+n,i=""+e;if(!t&&o>i){var a=o;o=i,i=a}var u={v:o,w:i};return r&&(u.name=r),u}function le(t,n){return de(t,n.v,n.w,n.name)}function pe(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:ve(t),edges:ye(t)};return md.isUndefined(t.graph())||(n.value=md.clone(t.graph())),n}function ve(t){return md.map(t.nodes(),function(n){var e=t.node(n),r=t.parent(n),o={v:n};return md.isUndefined(e)||(o.value=e),md.isUndefined(r)||(o.parent=r),o})}function ye(t){return md.map(t.edges(),function(n){var e=t.edge(n),r={v:n.v,w:n.w};return md.isUndefined(n.name)||(r.name=n.name),md.isUndefined(e)||(r.value=e),r})}function ge(t){var n=new wd(t.options).setGraph(t.value);return md.each(t.nodes,function(t){n.setNode(t.v,t.value),t.parent&&n.setParent(t.v,t.parent)}),md.each(t.edges,function(t){n.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),n}function be(t){function n(o){md.has(r,o)||(r[o]=!0,e.push(o),md.each(t.successors(o),n),md.each(t.predecessors(o),n))}var e,r={},o=[];return md.each(t.nodes(),function(t){e=[],n(t),e.length&&o.push(e)}),o}function _e(){this._arr=[],this._keyIndices={}}function me(t,n,e,r){return we(t,String(n),e||Pd,r||function(n){return t.outEdges(n)})}function we(t,n,e,r){var o,i,a={},u=new Od,c=function(t){var n=t.v!==o?t.v:t.w,r=a[n],c=e(t),s=i.distance+c;if(c<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+c);s<r.distance&&(r.distance=s,r.predecessor=o,u.decrease(n,s))};for(t.nodes().forEach(function(t){var e=t===n?0:Number.POSITIVE_INFINITY;a[t]={distance:e},u.add(t,e)});u.size()>0&&(o=u.removeMin(),i=a[o],i.distance!==Number.POSITIVE_INFINITY);)r(o).forEach(c);return a}function Ee(t,n,e){return md.transform(t.nodes(),function(r,o){r[o]=Nd(t,o,n,e)},{})}function je(t){function n(a){var u=o[a]={onStack:!0,lowlink:e,index:e++};if(r.push(a),t.successors(a).forEach(function(t){md.has(o,t)?o[t].onStack&&(u.lowlink=Math.min(u.lowlink,o[t].index)):(n(t),u.lowlink=Math.min(u.lowlink,o[t].lowlink))}),u.lowlink===u.index){var c,s=[];do{c=r.pop(),o[c].onStack=!1,s.push(c)}while(a!==c);i.push(s)}}var e=0,r=[],o={},i=[];return t.nodes().forEach(function(t){md.has(o,t)||n(t)}),i}function xe(t){return md.filter(Id(t),function(n){return n.length>1||1===n.length&&t.hasEdge(n[0],n[0])})}function ke(t,n,e){return Me(t,n||zd,e||function(n){return t.outEdges(n)})}function Me(t,n,e){var r={},o=t.nodes();return o.forEach(function(t){r[t]={},r[t][t]={distance:0},o.forEach(function(n){t!==n&&(r[t][n]={distance:Number.POSITIVE_INFINITY})}),e(t).forEach(function(e){var o=e.v===t?e.w:e.v,i=n(e);r[t][o]={distance:i,predecessor:t}})}),o.forEach(function(t){var n=r[t];o.forEach(function(e){var i=r[e];o.forEach(function(e){var r=i[t],o=n[e],a=i[e],u=r.distance+o.distance;u<a.distance&&(a.distance=u,a.predecessor=o.predecessor)})})}),r}function Ae(t){function n(i){if(md.has(r,i))throw new Oe;md.has(e,i)||(r[i]=!0,e[i]=!0,md.each(t.predecessors(i),n),delete r[i],o.push(i))}var e={},r={},o=[];if(md.each(t.sinks(),n),md.size(e)!==t.nodeCount())throw new Oe;return o}function Oe(){}function Ne(t){try{Dd(t)}catch(t){if(t instanceof Dd.CycleException)return!1;throw t}return!0}function Pe(t,n,e){md.isArray(n)||(n=[n]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),o=[],i={};return md.each(n,function(n){if(!t.hasNode(n))throw new Error("Graph does not have node: "+n);Le(t,n,"post"===e,i,r,o)}),o}function Le(t,n,e,r,o,i){md.has(r,n)||(r[n]=!0,e||i.push(n),md.each(o(n),function(n){Le(t,n,e,r,o,i)}),e&&i.push(n))}function Ie(t,n){return Ud(t,n,"post")}function Ce(t,n){return Ud(t,n,"pre")}function Se(t,n){function e(t){var e=t.v===r?t.w:t.v,o=a.priority(e);if(void 0!==o){var u=n(t);u<o&&(i[e]=r,a.decrease(e,u))}}var r,o=new wd,i={},a=new Od;if(0===t.nodeCount())return o;md.each(t.nodes(),function(t){a.add(t,Number.POSITIVE_INFINITY),o.setNode(t)}),a.decrease(t.nodes()[0],0);for(var u=!1;a.size()>0;){if(r=a.removeMin(),md.has(i,r))o.setEdge(r,i[r]);else{if(u)throw new Error("Input graph is not connected: "+t);u=!0}t.nodeEdges(r).forEach(e)}return o}function ze(t,n){void 0===n&&(n=[]);var r=new Rd({directed:!0});if(0===t.nodes().length)return r;n=De(t,n);var o,i,a,u,c=e.map();for(a=0;a<n.length;++a)if(o=n[a],o.nodes&&0!==o.nodes.length){for(i=""+a,u=0;u<o.nodes.length;++u)c.set(o.nodes[u],i);r.setNode(i,{type:o.type,nodes:o.nodes})}t.nodes();return t.nodes().forEach(function(n){t.node(n);c.has(n)||(i=""+a++,o={type:"same",nodes:[n]},c.set(n,i),r.setNode(i,o))}),t.edges().forEach(function(n){var e=(t.edge(n),c.get(n.v)),o=c.get(n.w),i=r.edge(e,o)||{delta:0};e===o?(i.delta=0,r.setEdge(e,o,i)):t.node(n.v).backwards?(i.delta=Math.max(i.delta,t.node(n.w).backwards?1:0),r.setEdge(o,e,i)):(i.delta=Math.max(i.delta,t.node(n.w).backwards?0:1),r.setEdge(e,o,i))}),r}function De(t,n){for(var e=0;e<n.length;++e)if("min"===n[e].type)return n;var r=t.sources();return[{type:"min",nodes:[r.length?r[0]:t.nodes()[0]]}].concat(n)}function Fe(t,n){var e=Ue(t,n);return t.edges().forEach(function(n){if(Te(e,n.v,n.w)<0){var r=t.edge(n)||{};r.reversed=!0,t.removeEdge(n),t.setEdge(n.w,n.v,r)}}),t}function Ue(t,n){var r=e.set(),o=new Rd({directed:!0}),i=[];if(!t.hasNode(n))throw Error("node not in graph");return Ve(t,n,r,o,i),t.nodes().forEach(function(n){r.has(n)||Ve(t,n,r,o,i)}),i.forEach(function(t,n){o.node(t).thread=n+1<i.length?i[n+1]:i[0]}),o}function Te(t,n,e){var r=t.node(n),o=t.node(e);if(r.depth<o.depth)for(var i=r.thread;t.node(i).depth>r.depth;){if(i===e)return 1;i=t.node(i).thread}else if(o.depth<r.depth)for(var a=o.thread;t.node(a).depth>o.depth;){if(a===n)return-1;a=t.node(a).thread}return 0}function Ve(t,n,e,r,o,i){if(void 0===i&&(i=0),!e.has(n)){e.add(n),o.push(n),r.setNode(n,{depth:i});t.outEdges(n).map(function(t){return t.w}).forEach(function(a,u){e.has(a)||r.setEdge(n,a,{delta:1}),Ve(t,a,e,r,o,i+1)})}}function Be(t){var n=t.sources(),r=e.set(),o=e.set();t.edges().forEach(function(t){t.v===t.w&&o.add(Ge(t))}),t.nodes().forEach(function(n){t.node(n).rank=0});for(;n.length>0;)!function(){var e=n.shift();r.add(e);var i=t.node(e);i||t.setNode(e,i={}),i.rank=0,t.inEdges(e).forEach(function(n){var e=void 0===t.edge(n).delta?1:t.edge(n).delta;i.rank=Math.max(i.rank,t.node(n.v).rank+e)}),t.outEdges(e).forEach(function(t){o.add(Ge(t))}),t.nodes().forEach(function(e){n.indexOf(e)<0&&!r.has(e)&&!t.inEdges(e).some(function(t){return!o.has(Ge(t))})&&n.push(e)})}()}function Ge(t){return t.v+""+t.w+""+t.name}function qe(t,n){var e=ze(t,n);0!==e.nodeCount()&&(Re(e),Fe(e,"0"),Be(e),We(e),e.nodes().forEach(function(n){var r=e.node(n);r.nodes.forEach(function(n){t.node(n).rank=r.rank})}))}function Re(t){t.sources().forEach(function(n){"0"!==n&&t.setEdge("0",n,{temp:!0,delta:0})})}function We(t){function e(e){var r=t.node(e),o=n.min(t.outEdges(e),function(n){return t.node(n.w).rank-t.edge(n).delta});void 0!==o&&(r.rank=o)}t.edges().forEach(function(n){t.edge(n).temp&&e(n.w)})}function $e(t,n){var r=[];if(0===n.length)return r;var o=t.sources(),i=e.map();return n.forEach(function(t,n){r.push([]),t.forEach(function(t){0===n&&o.indexOf(t)<0&&o.push(t),i.set(t,n)})}),Wd.preorder(t,o).forEach(function(t){r[i.get(t)].push(t)}),r}function Ye(t,n,e){return Ze(t,n,e)}function Ze(t,n,e){var r,o,i;n.length>e.length?(r=n,o=e):(r=e,o=n),i=o.length;var a=[];r.forEach(function(n){o.forEach(function(e,r){(t.hasEdge(n,e)||t.hasEdge(e,n))&&a.push(r)})});for(var u=1;u<i;)u*=2;var c=2*u-1;u-=1;for(var s=new Array(c),f=0;f<c;f++)s[f]=0;var d=0;return a.forEach(function(t){var n=t+u;for(s[n]++;n>0;)n%2&&(d+=s[n+1]),n=Math.floor((n-1)/2),s[n]++}),d}function Xe(t,n){for(var e=!0;e;){e=!1;for(var r=0;r<n.length;++r)for(var o=0;o<n[r].length-1;++o){var i=Je(t,n,r);Ke(n[r],o,o+1);var a=Je(t,n,r);a<i?e=!0:Ke(n[r],o,o+1)}}}function Je(t,n,e){var r=0;return e>0&&(r+=Ye(t,n[e-1],n[e])),e+1<n.length&&(r+=Ye(t,n[e],n[e+1])),r}function Ke(t,n,e){var r=t[n];t[n]=t[e],t[e]=r}function Qe(t){var n=Math.floor(t.length/2);if(0===t.length)return-1;if(t.length%2==1)return t[n];if(2===t.length)return(t[0]+t[1])/2;var e=t[n-1]-t[0],r=t[t.length-1]-t[n];return(t[n-1]*r+t[n]*e)/(e+r)}function He(t,n,e,r,o,i){void 0===i&&(i=!1);var a=n[e],u=n[r],c=[];return u.forEach(function(n,e){t.nodeEdges(n,o).length>0&&c.push(e)}),0===c.length&&i&&a.forEach(function(n,e){t.nodeEdges(n,o).length>0&&c.push(e+.5)}),c.sort(function(t,n){return t-n}),c}function tr(t,n){for(var r=e.map(t.map(function(t,n){return[t,n]}),function(t){return t[0]}),o=1;o<t.length;++o)for(var i=o;i>0;--i){for(var a=i-1,u=n.get(t[a]),c=n.get(t[i]);-1===(u=n.get(t[a]))&&a>0;)a--;if(-1===c||-1===u)break;if(u===c&&(u=r.get(t[a]),c=r.get(t[i])),c>=u)break;var s;s=[t[a],t[i]],t[i]=s[0],t[a]=s[1]}}function nr(t,n,r,o){if(void 0===r&&(r=1),void 0===o&&(o=!1),r>0)for(var i=1;i<n.length;++i)!function(r){var i=e.map();n[r].forEach(function(e){var a=Qe(He(t,n,r,r-1,e,o));i.set(e,a)}),tr(n[r],i)}(i);else for(var a=n.length-2;a>=0;--a)!function(r){var i=e.map();n[r].forEach(function(e){var a=Qe(He(t,n,r,r+1,e,o));i.set(e,a)}),tr(n[r],i)}(a)}function er(t,n){void 0===n&&(n=25);for(var e=rr(t),r=$e(t,e),o=r,i=0;i++<n;)nr(t,r,i%2==0),Xe(t,r),or(t,r)<or(t,o)&&(o=ir(r));o.forEach(function(n){n.forEach(function(n,e){t.node(n).depth=e})})}function rr(t){var n=[];return t.nodes().forEach(function(e){for(var r=t.node(e).rank||0;r>=n.length;)n.push([]);n[r].push(e)}),n}function or(t,n){for(var e=0,r=0;r<n.length-1;++r)e+=Ye(t,n[r],n[r+1]);return e}function ir(t){var n=[];return t.forEach(function(t){n.push(t.map(function(t){return t}))}),n}function ar(t){"object"!=typeof t.graph()&&t.setGraph({}),t.graph().dummyChains=[],t.edges().forEach(function(n){return ur(t,n)})}function ur(t,n){function e(e,o){var i={points:[],value:r.value,origEdge:n,origLabel:r};t.setEdge(e,o,i,n.name)}var r=t.edge(n),o=sr(t.node(n.v),t.node(n.w));if(0!==o.length){t.removeEdge(n);var i=n.v;o.forEach(function(r,o){var a="__"+n.v+"_"+n.w+"_"+o;t.hasNode(a)||(r.dummy="edge",t.setNode(a,r),0===o&&t.graph().dummyChains.push(a)),e(i,i=a)}),e(i,n.w)}}function cr(t){(t.graph().dummyChains||[]).forEach(function(n){var e=t.node(n),r=t.inEdges(n).map(function(n){return t.edge(n)});r.forEach(function(n){n.origLabel.dy=n.dy,n.origLabel.x0=n.x0,n.origLabel.y0=n.y0,n.origLabel.r0=n.r0,n.origLabel.d0=n.d0,t.setEdge(n.origEdge,n.origLabel)});for(var o,i=r.map(function(t){return t.r1});e.dummy;)r=t.outEdges(n).map(function(n){return t.edge(n)}),r.forEach(function(t,n){t.origLabel.points.push({x:(e.x0+e.x1)/2,y:t.y0,d:t.d0,ro:t.r0,ri:i[n]})}),i=r.map(function(t){return t.r1}),o=t.successors(n)[0],t.removeNode(n),e=t.node(n=o);r.forEach(function(t){t.origLabel.x1=t.x1,t.origLabel.y1=t.y1,t.origLabel.r1=t.r1,t.origLabel.d1=t.d1})})}function sr(t,n){var e=[],r=t.rank;if(r+1<=n.rank){for(t.backwards&&e.push({rank:r,backwards:!1});++r<n.rank;)e.push({rank:r,backwards:!1});n.backwards&&e.push({rank:r,backwards:!1})}else if(r>n.rank){for(t.backwards||e.push({rank:r,backwards:!0});r-- >n.rank+1;)e.push({rank:r,backwards:!0});n.backwards||e.push({rank:r,backwards:!0})}return e}function fr(t){for(var r,o=n.max(t,function(t){return t.rank||0})||0,i=n.max(t,function(t){return t.band||0})||0,a=e.nest().key(function(t){return t.rank||0}).key(function(t){return t.band||0}).sortValues(function(t,n){return t.depth-n.depth}).map(t),u=new Array(o+1),c=0;c<=o;++c)if(u[c]=new Array(i+1),r=a.get(c))for(var s=0;s<=i;++s)u[c][s]=r.get(s)||[];else for(var f=0;f<=i;++f)u[c][f]=[];return u.bandValues=dr(u),u}function dr(t){if(0===t.length||0===t[0].length)return[];for(var e=t[0].length,r=new Array(e),o=0;o<e;o++)r[o]=0;return t.forEach(function(t){t.forEach(function(t,e){var o=n.sum(t,function(t){return t.value});r[e]=Math.max(r[e],o)})}),r}function hr(t,e,r){var o=n.max(t.nodes(),function(n){return t.node(n).rank||0})||0,i=(e-r)/o;t.nodes().forEach(function(n){var e=t.node(n);e.x0=i*(e.rank||0),e.x1=e.x0+r})}function lr(t,n){return 1}function pr(){function t(r,o,i){r.forEach(function(a){var u=0;a.forEach(function(a,c){var s=r.bandValues[c]/n.sum(r.bandValues)*o,f=i*s/5,d=s-2*f,h=n.sum(a,function(t){return t.dy}),l=a.map(function(n,r){return n.value&&a[r+1]?e(a[r],a[r+1],t):0}),p=Math.max(0,d-h),v=n.sum(l)?p/n.sum(l):0,y=u+f;1===a.length&&(y+=(d-a[0].dy)/2);var g=Number.MAX_VALUE;a.forEach(function(t,n){t.y=y,t.spaceAbove=g,t.spaceBelow=l[n]*v,y+=t.dy+t.spaceBelow,g=t.spaceBelow,t.data&&void 0!==t.data.forceY&&(t.y=f+t.data.forceY*(d-t.dy))}),a.length>0&&(a[a.length-1].spaceBelow=Number.MAX_VALUE),u+=s})})}var e=lr;return t.separation=function(n){return arguments.length?(e=vr(n),t):e},t}function vr(t){if("function"!=typeof t)throw new Error;return t}function yr(t,r){t.nodes().forEach(function(o){function i(t,n){if(u.has(t))return u.get(t);var e={id:t,node:a.data,side:n,incoming:[],outgoing:[]};return u.set(t,e),e}var a=t.node(o),u=e.map();t.inEdges(o).forEach(function(n){var e=t.edge(n),r=i(e.targetPortId||"in","l"!==a.direction?"west":"east");r.incoming.push(n),e.targetPort=r}),t.outEdges(o).forEach(function(n){var e=t.edge(n),r=i(e.sourcePortId||"out","l"!==a.direction?"east":"west");r.outgoing.push(n),e.sourcePort=r}),a.ports=u.values(),a.ports.sort(r);var c={west:0,east:0},s={west:0,east:0};a.ports.forEach(function(e){e.y=c[e.side],e.index=s[e.side],e.dy=Math.max(n.sum(e.incoming,function(n){return t.edge(n).dy}),n.sum(e.outgoing,function(n){return t.edge(n).dy}));var r="west"===e.side?a.x0:a.x1;e.outgoing.forEach(function(n){var o=t.edge(n);o.x0=r,o.y0=a.y+e.y+o.dy/2}),e.incoming.forEach(function(n){var o=t.edge(n);o.x1=r,o.y1=a.y+e.y+o.dy/2}),c[e.side]+=e.dy,s[e.side]+=1})})}function gr(t,n,e){if(void 0===e&&(e=!0),n.v===n.w)return Math.PI/2*(e?1:-1);var r=t.edge(n);return Math.atan2(r.y1-r.y0,r.x1-r.x0)}function br(t,n){t.nodes().forEach(function(n){return _r(t,n)})}function _r(t,n){var e=t.node(n);e.ports.forEach(function(n){n.incoming.sort(mr(t,e,!1)),n.outgoing.sort(mr(t,e,!0))})}function mr(t,n,e){return void 0===e&&(e=!0),function(n,r){var o=gr(t,n,e),i=gr(t,r,e),a=e?1:-1;return n.v===r.v&&n.w===r.w&&Math.abs(o-i)<.001?"number"==typeof n.name&&"number"==typeof r.name?n.name-r.name:"string"==typeof n.name&&"string"==typeof r.name?n.name.localeCompare(r.name):0:Math.abs(o-i)<.001?n.w===r.w?t.node(r.v).y-t.node(n.v).y:n.v===r.v?t.node(r.w).y-t.node(n.w).y:0:a*(o-i)}}function wr(t,n){for(var e=null,r=0;r<t.length;++r)if(n(t[r])){e=r;break}return e}function Er(t,n){if(0!==t.length){for(var e,r=0,o=t.length-1;o>=0;--o)e=t[o].dy/2,t[o][n]-e<r&&(t[o][n]=Math.min(t[o].Rmax,r+e)),r=t[o][n]+e;for(var i=t[0].Rmax+t[0].dy/2,a=0;a<t.length;++a)e=t[a].dy/2,t[a][n]+e>i&&(t[a][n]=Math.max(e,i-e)),i=t[a][n]-e}}function jr(t){return xr(t),kr(t),t}function xr(t){t.nodes().forEach(function(n){var e=t.node(n);e.ports.forEach(function(n){var r=e.y+n.y,o=e.y+n.y;n.outgoing.forEach(function(n){var o=t.edge(n)
;o.y0=r+o.dy/2,o.d0=e.backwards?"l":"r",o.dy=o.dy,r+=o.dy}),n.incoming.forEach(function(n){var r=t.edge(n);r.y1=o+r.dy/2,r.d1=e.backwards?"l":"r",r.dy=r.dy,o+=r.dy})})})}function kr(t){t.nodes().forEach(function(n){t.node(n).ports.forEach(function(n){Ar(t,n.outgoing,"r0"),Ar(t,n.incoming,"r1")})})}function Mr(t){var n=t.x1-t.x0,e=t.y1-t.y0;return t.d0!==t.d1?Math.abs(e)/2.1:0!==e?(n*n+e*e)/Math.abs(4*e):1/0}function Ar(t,n,e){var r=n.map(function(n){return t.edge(n)});r.forEach(function(t){t.Rmax=Mr(t),t[e]=Math.max(t.dy/2,t.d0===t.d1?.6*t.Rmax:5+t.dy/2)});var o="r0"===e?wr(r,function(t){return t.y1>t.y0}):wr(r,function(t){return t.y0>t.y1});if(null===o&&(o=r.length),Er(r.slice(o),e),o>0){for(var i=[],a=o-1;a>=0;a--)i.push(r[a]);Er(i,e)}}function Or(t,n,e,r,o,i,a){var u=new Rd({directed:!0,multigraph:!0});return t.nodes.forEach(function(t,r){var o=n(t,r);if(u.hasNode(o))throw new Error("duplicate: "+o);u.setNode(o,{data:t,index:r,backwards:e(t,r),x0:t.x0,x1:t.x1,y:t.y0})}),t.links.forEach(function(t,n){var e=Nr(r(t,n)),c=Nr(o(t,n)),s={data:t,sourcePortId:e.port,targetPortId:c.port,index:n,points:[],value:a(t,n),type:i(t,n)};if(!u.hasNode(e.id))throw new Error("missing: "+e.id);if(!u.hasNode(c.id))throw new Error("missing: "+c.id);u.setEdge(e.id,c.id,s,i(t,n))}),u.setGraph({}),u}function Nr(t){return"object"==typeof t?t:{id:t,port:void 0}}function Pr(t){return t.nodes}function Lr(t){return t.links}function Ir(t){return t.id}function Cr(t){return t.direction&&"l"===t.direction.toLowerCase()}function Sr(t){return{id:"object"==typeof t.source?t.source.id:t.source,port:"object"==typeof t.sourcePort?t.sourcePort.id:t.sourcePort}}function zr(t){return{id:"object"==typeof t.target?t.target.id:t.target,port:"object"==typeof t.targetPort?t.targetPort.id:t.targetPort}}function Dr(t){return t.type}function Fr(t,n){return t.id.localeCompare(n.id)}function Ur(){function t(){var t={nodes:o.apply(null,arguments),links:i.apply(null,arguments)},n=Or(t,a,u,c,s,f,E);if(Tr(n,E),p)n.nodes().forEach(function(t){var e=n.node(t),r=p(e.data);e.x0=r[0],e.x1=r[0]+m,e.y=r[1]}),Vr(n,w);else{null!==d?r(n,d):(qe(n,h),er(n,l)),ar(n),Tr(n,E),null===d&&er(n,l);var k=fr(n.nodes().map(function(t){return n.node(t)}));e(n,k),Vr(n,w),x(k,_-g,j),hr(n,b-y,m),n.nodes().forEach(function(t){var e=n.node(t);e.x0+=y,e.x1+=y,e.y+=g})}return yr(n,v),br(n),jr(n),cr(n),Gr(n),qr(n,t),t}function e(t,e){if(null===w){var r=n.sum(e.bandValues);r<=0?w=1:(w=(_-g)/r,1!==j&&(w*=1-j))}}function r(t,n){n.forEach(function(n,e){n.forEach(function(n,r){if(n.forEach)n.forEach(function(n,o){var i=t.node(n);i&&(i.rank=e,i.band=r,i.depth=o)});else{var o=t.node(n);o&&(o.rank=e,o.depth=r)}})})}var o=Pr,i=Lr,a=Ir,u=Cr,c=Sr,s=zr,f=Dr,d=null,h=[],l=25,p=null,v=Fr,y=0,g=0,b=1,_=1,m=1,w=null,E=function(t){return t.value},j=.5,x=pr();return t.update=function(t,n){var r=Or(t,a,u,c,s,f,E);Tr(r,E);var o=fr(r.nodes().map(function(t){return r.node(t)}));return e(r,o),Vr(r,w),yr(r,v),br(r),jr(r),Gr(r),qr(r,t),t},t.nodes=function(n){return arguments.length?(o=Br(n),t):o},t.links=function(n){return arguments.length?(i=Br(n),t):i},t.nodeId=function(n){return arguments.length?(a=Br(n),t):a},t.nodeBackwards=function(n){return arguments.length?(u=Br(n),t):u},t.sourceId=function(n){return arguments.length?(c=Br(n),t):c},t.targetId=function(n){return arguments.length?(s=Br(n),t):s},t.linkType=function(n){return arguments.length?(f=Br(n),t):f},t.sortPorts=function(n){return arguments.length?(v=Br(n),t):v},t.ordering=function(n){return arguments.length?(d=n,t):d},t.rankSets=function(n){return arguments.length?(h=n,t):h},t.nodeWidth=function(n){return arguments.length?(m=n,t):m},t.nodePosition=function(n){return arguments.length?(p=n,t):p},t.size=function(n){return arguments.length?(y=g=0,b=+n[0],_=+n[1],t):[b-y,_-g]},t.extent=function(n){return arguments.length?(y=+n[0][0],g=+n[0][1],b=+n[1][0],_=+n[1][1],t):[[y,g],[b,_]]},t.whitespace=function(n){return arguments.length?(j=n,t):j},t.scale=function(n){return arguments.length?(w=n,t):w},t.linkValue=function(n){return arguments.length?(E=n,t):E},t.verticalLayout=function(n){return arguments.length?(x=Br(n),t):x},t}function Tr(t,e){t.nodes().forEach(function(e){var r=t.node(e),o=n.sum(t.inEdges(e),function(n){return t.edge(n).value}),i=n.sum(t.outEdges(e),function(n){return t.edge(n).value});r.value=Math.max(o,i)})}function Vr(t,n){t.edges().forEach(function(e){var r=t.edge(e);r.dy=r.value*n}),t.nodes().forEach(function(e){var r=t.node(e);r.dy=r.value*n})}function Br(t){if("function"!=typeof t)throw new Error;return t}function Gr(t){t.edges().forEach(function(n){var e=t.edge(n);e.points.unshift({x:e.x0,y:e.y0,ro:e.r0,d:e.d0}),e.points.push({x:e.x1,y:e.y1,ri:e.r1,d:e.d1})})}function qr(t,n){t.nodes().forEach(function(n){var e=t.node(n);e.data.incoming=[],e.data.outgoing=[],e.data.ports=e.ports,e.data.ports.forEach(function(t){t.incoming=[],t.outgoing=[]}),e.data.dy=e.dy,e.data.x0=e.x0,e.data.x1=e.x1,e.data.y0=e.y,e.data.y1=e.y+e.dy,e.data.rank=e.rank,e.data.band=e.band,e.data.depth=e.depth,e.data.value=e.value,e.data.spaceAbove=e.spaceAbove,e.data.spaceBelow=e.spaceBelow}),t.edges().forEach(function(n){var e=t.edge(n);e.data.source=t.node(n.v).data,e.data.target=t.node(n.w).data,e.data.sourcePort=e.sourcePort,e.data.targetPort=e.targetPort,e.data.source.outgoing.push(e.data),e.data.target.incoming.push(e.data),e.data.sourcePort&&e.data.sourcePort.outgoing.push(e.data),e.data.targetPort&&e.data.targetPort.incoming.push(e.data),e.data.value=e.value,e.data.type=e.type,e.data.dy=e.dy,e.data.points=e.points||[]})}function Rr(){function t(t,o){function i(){t.forEach(function(t){t.forEach(function(t){var n,e,i,a=0,u=t.length;for(t.sort($r),i=0;i<u;++i)n=t[i],e=a-n.y,e>0&&(n.y+=e),a=n.y+n.dy+r;if((e=a-r-o)>0)for(a=n.y-=e,i=u-2;i>=0;--i)n=t[i],e=n.y+n.dy+r-a,e>0&&(n.y-=e),a=n.y})})}!function(){t.forEach(function(t){var n=0;t.forEach(function(t){t.forEach(function(t){t.y=n++})})})}(),i();for(var a=1,u=e;u>0;--u)!function(e){function r(t){return t.target,0*t.value}t.slice().reverse().forEach(function(t){t.forEach(function(t){t.forEach(function(t){var o=t.outgoing||t.edges;if(o.length){var i=n.sum(o,r)/n.sum(o,Wr);t.y+=(i-0)*e}})})})}(a*=.99),i(),function(e){function r(t){return t.source,0*t.value}t.forEach(function(t){t.forEach(function(t){t.forEach(function(t){var o=t.incoming||t.edges;if(o.length){var i=n.sum(o,r)/n.sum(o,Wr);t.y+=(i-0)*e}})})})}(a),i()}var e=25,r=8;return t.iterations=function(n){return arguments.length?(e=+n,t):e},t.padding=function(n){return arguments.length?(r=+n,t):r},t}function Wr(t){return t.value}function $r(t,n){return t.y-n.y}function Yr(t){return 0===t.dy?0:2}function Zr(){function t(t){var n=t.x1-t.x0,e=t.y1-t.y0;return[t.dy/2,(n*n+e*e)/Math.abs(4*e)]}function n(t){for(var n,r="",o=0;o<t.points.length-1;++o)n={x0:t.points[o].x,y0:t.points[o].y,x1:t.points[o+1].x,y1:t.points[o+1].y,r0:t.points[o].ro,r1:t.points[o+1].ri,d0:t.points[o].d,d1:t.points[o+1].d,dy:t.dy},r+=e(n);return r}function e(n){function e(t,n){var e=t*(p-l)>0?1:0,r=b*t*(p-l)>0?n+f:n-f;return 0===O&&(r=n),"A"+r+" "+r+" "+Math.abs(O)+" 0 "+e+" "}var s=(n.d0||"r")+(n.d1||"r");if(n.source&&n.source===n.target)return r(n);if("rl"===s)return o(n);if("rd"===s)return i(n);if("dr"===s)return a(n);if("lr"===s)return u(n);var f=Math.max(c(n),n.dy)/2,d=n.x0,h=n.x1,l=n.y0,p=n.y1;if(h<d){var v;v=[h,d],d=v[0],h=v[1];var y;y=[p,l],l=y[0],p=y[1]}var g=p>l?1:-1,b=1,_=t(n),m=Math.max(_[0],Math.min(_[1],(h-d)/3)),w=Math.max(_[0],Math.min(_[1],n.r0||m)),E=Math.max(_[0],Math.min(_[1],n.r1||m)),j=h-d,x=p-l-g*(w+E),k=Math.sqrt(j*j+x*x),M=-g*Math.acos(Math.min(1,(w+E)/k)),A=Math.atan2(x,j),O=Math.PI/2+g*(A+M),N=f*g*Math.sin(O),P=f*Math.cos(O),L=d+b*w*Math.sin(Math.abs(O)),I=h-b*E*Math.sin(Math.abs(O)),C=l+w*g*(1-Math.cos(O)),S=p-E*g*(1-Math.cos(O));(isNaN(O)||Math.abs(O)<.001)&&(O=w=E=0,L=d,I=h,C=l,S=p,N=0,P=f);var z;return z="M"+[d,l-f]+" "+e(1,w)+[L+N,C-P]+" L"+[I+N,S-P]+" "+e(-1,E)+[h,p-f]+" L"+[h,p+f]+" "+e(1,E)+[I-N,S+P]+" L"+[L-N,C+P]+" "+e(-1,w)+[d,l+f]+" Z",/NaN/.test(z)&&console.error("path NaN",n,z),z}function r(t){function n(t){var n=t>0?1:0,i=t>0?r+e:r-e;return"A"+i+" "+i+" "+Math.abs(o)+" 1 "+n+" "}var e=Math.max(c(t),t.dy)/2,r=1.5*e,o=2*Math.PI,i=t.x0,a=t.y0;return"M"+[i+.1,a-e]+" "+n(1)+[i-.1,a-e]+" L"+[i-.1,a+e]+" "+n(-1)+[i+.1,a+e]+" Z"}function o(t){function n(t){var n=t*h>0?1:0,r=t*h>0?d+e:d-e;return 0===h&&(r=d),"A"+r+" "+r+" "+Math.abs(h)+" 0 "+n+" "}var e=Math.max(c(t),t.dy)/2,r=t.x0,o=t.x1,i=t.y0,a=t.y1,u=t.x1-t.x0,s=t.y1-t.y0,f=(t.r0+t.r1)/2||5+e,d=Math.min(Math.abs(a-i)/2.1,f),h=Math.atan2(s-2*d,u),l=(Math.sqrt(Math.max(0,u*u+(s-2*d)*(s-2*d))),t.y1>t.y0?1:-1),p=e*Math.sin(h),v=e*Math.cos(h),y=t.x0+d*Math.sin(Math.abs(h)),g=t.x1+d*Math.sin(Math.abs(h)),b=t.y0+d*l*(1-Math.cos(h)),_=t.y1-d*l*(1-Math.cos(h));return"M"+[r,i-e]+" "+n(1)+[y+p,b-v]+" L"+[g+p,_-v]+" "+n(1)+[o,a+e]+" L"+[o,a-e]+" "+n(-1)+[g-p,_+v]+" L"+[y-p,b+v]+" "+n(-1)+[r,i+e]+" Z"}function i(t){function n(t){var n=t*u>0?1:0,r=t*u>0?s+e:s-e;return 0===u&&(r=s),"A"+r+" "+r+" "+Math.abs(u)+" 0 "+n+" "}var e=Math.max(c(t),t.dy)/2,r=t.x0,o=t.x1,i=t.y0,a=t.y1,u=(t.x1,t.x0,t.y1,t.y0,Math.PI/2),s=Math.max(0,o-r),f=(t.y1,t.y0,i+s);return"M"+[r,i-e]+" "+n(1)+[o+e,f]+" L"+[o+e,a]+" "+[o-e,a]+" "+[o-e,f]+" "+n(-1)+[r,i+e]+" Z"}function a(t){function n(t){var n=t*u>0?1:0,r=t*u>0?s+e:s-e;return 0===u&&(r=s),"A"+r+" "+r+" "+Math.abs(u)+" 0 "+n+" "}var e=Math.max(c(t),t.dy)/2,r=t.x0,o=t.x1,i=t.y0,a=t.y1,u=(t.x1,t.x0,t.y1,t.y0,Math.PI/2),s=Math.max(0,o-r),f=(t.y1,t.y0,a-s);return"M"+[r-e,i]+" L"+[r+e,i]+" "+[r+e,f]+" "+n(-1)+[o,a-e]+" L"+[o,a+e]+" "+n(1)+[r-e,f]+" Z"}function u(t){function n(t){var n=t*h>0?1:0,r=-t*h>0?d+e:d-e;return 0===h&&(r=d),"A"+r+" "+r+" "+Math.abs(h)+" 0 "+n+" "}var e=Math.max(c(t),t.dy)/2,r=t.x0,o=t.x1,i=t.y0,a=t.y1,u=t.x1-t.x0,s=t.y1-t.y0,f=(t.r0+t.r1)/2||5+e,d=Math.min(Math.abs(s)/2.1,f),h=Math.atan2(s-2*d,u),l=(Math.sqrt(Math.max(0,u*u+(s-2*d)*(s-2*d))),t.y1>t.y0?1:-1),p=e*Math.sin(h),v=e*Math.cos(h),y=t.x0-d*Math.sin(Math.abs(h)),g=t.x1-d*Math.sin(Math.abs(h)),b=t.y0+d*l*(1-Math.cos(h)),_=t.y1-d*l*(1-Math.cos(h));return"M"+[r,i-e]+" "+n(-1)+[y-p,b-v]+" L"+[g-p,_-v]+" "+n(-1)+[o,a+e]+" L"+[o,a-e]+" "+n(1)+[g+p,_-v]+" L"+[y+p,b-v]+" "+n(1)+[r,i+e]+" Z"}var c=Yr;return n.minWidth=function(t){return arguments.length?(c=Xr(t),n):c},n}function Xr(t){if("function"!=typeof t)throw new Error;return t}function Jr(t){return"translate("+t.x0+","+t.y0+")"}function Kr(t){var n=!1,e=!1;return n=t.spaceAbove>20&&"type"!==t.style,0===t.incoming.length?(e=!0,n=!1):0===t.outgoing.length&&(e=!1,n=!1),{titleAbove:n,right:e}}function Qr(t,n){var e=o.select(this),r=e.text().split(/\n/);1!==r.length&&(e.text(null),r.forEach(function(t,n){e.append("tspan").attr("x",0).attr("dy",1.1*(0===n?.7-r.length/2:1)+"em").text(t)}))}function Hr(t){if("function"!=typeof t)throw new Error;return t}function to(t,n){var e={top:Number.MAX_VALUE,left:Number.MAX_VALUE,bottom:0,right:0};return n.nodes.forEach(function(n){var r=t.get(n);r&&(r.x0<e.left&&(e.left=r.x0),r.x1>e.right&&(e.right=r.x1),r.y0<e.top&&(e.top=r.y0),r.y1>e.bottom&&(e.bottom=r.y1))}),n.rect=e,n}function no(t,n,e){return function(r){var o=[],i=t(r.source),a=t(r.target),u=n(r);return o.push(i+" â†’ "+a),u&&o.push(u),o.push(e(r.value)),o.join("\n")}}function eo(){function t(t){(t.selection?t.selection():t).each(function(r){var i=o.select(this),a=i.selectAll(".sankey").data([{type:"sankey"}]),u=a.enter().append("g").classed("sankey",!0);u.append("g").classed("groups",!0),u.append("g").classed("links",!0),u.append("g").classed("nodes",!0),u.append("g").classed("slice-titles",!0),a=a.merge(u),a.attr("transform","translate("+y.left+","+y.top+")");var f=e.map(r.nodes,function(t){return t.id}),d=(_||[]).map(function(t){return to(f,t)});n(a,t,r.nodes),c(a,t,r.links),s(i,d),i.on("click",function(){M.call("selectNode",this,null),M.call("selectLink",this,null)})})}function n(t,n,e){var r=t.select(".nodes").selectAll(".node").data(e,function(t){return t.id});r.exit().remove(),r=r.merge(r.enter().append("g").attr("class","node").call(w).on("click",p)),n instanceof i.transition?r.transition(n).call(w):r.call(w)}function c(t,n,e){var r=t.select(".links").selectAll(".link").data(e,function(t){return t.source.id+"-"+t.target.id+"-"+t.type});r.exit().remove();var a=r.enter().append("g").attr("class","link").on("click",l);a.append("path").attr("d",E).style("fill","white").each(function(t){this._current=t}),a.append("title"),a.append("text").attr("class","label").attr("dy","0.35em").attr("x",function(t){return t.points[0].x+4}).attr("y",function(t){return t.points[0].y}),r=r.merge(a),r.classed("selected",function(t){return t.id===b}),r.sort(h),n instanceof i.transition?(r=r.transition(n),r.select("path").style("fill",j).each(function(t){o.select(this).transition(n).attrTween("d",f)})):r.select("path").style("fill",j).attr("d",E),r.select("title").text(x),r.select(".label").text(k).attr("x",function(t){return t.points[0].x+4}).attr("y",function(t){return t.points[0].y})}function s(t,n){var e=t.select(".groups").selectAll(".group").data(n);e.exit().remove();var r=e.enter().append("g").attr("class","group").on("click",v);r.append("rect"),r.append("text").attr("x",-10).attr("y",-25),e=e.merge(r),e.style("display",function(t){return t.title?"inline":"none"}).attr("transform",function(t){return"translate("+t.rect.left+","+t.rect.top+")"}).select("rect").attr("x",-10).attr("y",-20).attr("width",function(t){return t.rect.right-t.rect.left+20}).attr("height",function(t){return t.rect.bottom-t.rect.top+30}),e.select("text").text(function(t){return t.title})}function f(t){t.points.forEach(function(t){t.ri>1e3&&(t.ri=1e3),t.ro>1e3&&(t.ro=1e3)});var n=r.interpolate(d(this._current),t),e=this;return function(t){return e._current=n(t),E(e._current)}}function d(t){return{points:t.points,dy:t.dy}}function h(t,n){return t.id===b?1:n.id===b?-1:!t.source||t.target&&"d"===t.target.direction?-1:!n.source||n.target&&"d"===n.target.direction?1:!t.target||t.source&&"d"===t.source.direction?-1:!n.target||n.source&&"d"===n.source.direction?1:t.dy-n.dy}function l(t){o.event.stopPropagation();var n=o.select(this).node();M.call("selectLink",n,t)}function p(t){o.event.stopPropagation();var n=o.select(this).node();M.call("selectNode",n,t)}function v(t){d3.event.stopPropagation();var n=d3.select(this)[0][0];a.dispatch.selectGroup.call(n,t)}var y={top:0,right:0,bottom:0,left:0},g=null,b=null,_=[],m=u.format(".3s"),w=$d(),E=Zr(),j=function(t){return null},x=no(w.nodeTitle(),function(t){return t.type},m),k=ro,M=a.dispatch("selectNode","selectGroup","selectLink");return t.margins=function(t){return arguments.length?(y={top:void 0===t.top?y.top:t.top,left:void 0===t.left?y.left:t.left,bottom:void 0===t.bottom?y.bottom:t.bottom,right:void 0===t.right?y.right:t.right},this):y},t.groups=function(t){return arguments.length?(_=t,this):_},t.nodeTitle=function(t){return arguments.length?(w.nodeTitle(t),x=no(t,function(t){return t.type},m),this):w.nodeTitle()},t.nodeValue=function(t){return arguments.length?(w.nodeValue(t),this):w.nodeValue()},t.linkTitle=function(t){return arguments.length?(x=t,this):x},t.linkLabel=function(t){return arguments.length?(k=t,this):k},t.linkColor=function(t){return arguments.length?(j=t,this):j},t.linkMinWidth=function(t){return arguments.length?(E.minWidth(t),this):E.minWidth()},t.selectNode=function(t){return g=t,this},t.selectLink=function(t){return b=t,this},t.on=function(){var n=M.on.apply(M,arguments);return n===M?t:n},t}function ro(t){return null}var oo="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},io=f,ao=d,uo=h,co=Array.prototype,so=co.splice,fo=l,ho=p,lo=v,po=y;g.prototype.clear=io,g.prototype.delete=fo,g.prototype.get=ho,g.prototype.has=lo,g.prototype.set=po;var vo=g,yo=b,go=_,bo=m,_o=w,mo="object"==typeof oo&&oo&&oo.Object===Object&&oo,wo=mo,Eo="object"==typeof self&&self&&self.Object===Object&&self,jo=wo||Eo||Function("return this")(),xo=jo,ko=xo.Symbol,Mo=ko,Ao=Object.prototype,Oo=Ao.hasOwnProperty,No=Ao.toString,Po=Mo?Mo.toStringTag:void 0,Lo=E,Io=Object.prototype,Co=Io.toString,So=j,zo="[object Null]",Do="[object Undefined]",Fo=Mo?Mo.toStringTag:void 0,Uo=x,To=k,Vo="[object AsyncFunction]",Bo="[object Function]",Go="[object GeneratorFunction]",qo="[object Proxy]",Ro=M,Wo=xo["__core-js_shared__"],$o=Wo,Yo=function(){var t=/[^.]+$/.exec($o&&$o.keys&&$o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Zo=A,Xo=Function.prototype,Jo=Xo.toString,Ko=O,Qo=/[\\^$.*+?()[\]{}|]/g,Ho=/^\[object .+?Constructor\]$/,ti=Function.prototype,ni=Object.prototype,ei=ti.toString,ri=ni.hasOwnProperty,oi=RegExp("^"+ei.call(ri).replace(Qo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ii=N,ai=P,ui=L,ci=ui(xo,"Map"),si=ci,fi=ui(Object,"create"),di=fi,hi=I,li=C,pi="__lodash_hash_undefined__",vi=Object.prototype,yi=vi.hasOwnProperty,gi=S,bi=Object.prototype,_i=bi.hasOwnProperty,mi=z,wi="__lodash_hash_undefined__",Ei=D;F.prototype.clear=hi,F.prototype.delete=li,F.prototype.get=gi,F.prototype.has=mi,F.prototype.set=Ei;var ji=F,xi=U,ki=T,Mi=V,Ai=B,Oi=G,Ni=q,Pi=R;W.prototype.clear=xi,W.prototype.delete=Ai,W.prototype.get=Oi,W.prototype.has=Ni,W.prototype.set=Pi;var Li=W,Ii=200,Ci=$;Y.prototype.clear=yo,Y.prototype.delete=go,Y.prototype.get=bo,Y.prototype.has=_o,Y.prototype.set=Ci;var Si=Y,zi=Z,Di=function(){try{var t=ui(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Fi=Di,Ui=X,Ti=Object.prototype,Vi=Ti.hasOwnProperty,Bi=J,Gi=K,qi=Q,Ri=H,Wi="[object Arguments]",$i=tt,Yi=Object.prototype,Zi=Yi.hasOwnProperty,Xi=Yi.propertyIsEnumerable,Ji=$i(function(){return arguments}())?$i:function(t){return Ri(t)&&Zi.call(t,"callee")&&!Xi.call(t,"callee")},Ki=Ji,Qi=Array.isArray,Hi=Qi,ta=nt,na=s(function(t,n){var e=n&&!n.nodeType&&n,r=e&&!0&&t&&!t.nodeType&&t,o=r&&r.exports===e,i=o?xo.Buffer:void 0,a=i?i.isBuffer:void 0,u=a||ta;t.exports=u}),ea=9007199254740991,ra=/^(?:0|[1-9]\d*)$/,oa=et,ia=9007199254740991,aa=rt,ua={};ua["[object Float32Array]"]=ua["[object Float64Array]"]=ua["[object Int8Array]"]=ua["[object Int16Array]"]=ua["[object Int32Array]"]=ua["[object Uint8Array]"]=ua["[object Uint8ClampedArray]"]=ua["[object Uint16Array]"]=ua["[object Uint32Array]"]=!0,ua["[object Arguments]"]=ua["[object Array]"]=ua["[object ArrayBuffer]"]=ua["[object Boolean]"]=ua["[object DataView]"]=ua["[object Date]"]=ua["[object Error]"]=ua["[object Function]"]=ua["[object Map]"]=ua["[object Number]"]=ua["[object Object]"]=ua["[object RegExp]"]=ua["[object Set]"]=ua["[object String]"]=ua["[object WeakMap]"]=!1;var ca=ot,sa=it,fa=s(function(t,n){var e=n&&!n.nodeType&&n,r=e&&!0&&t&&!t.nodeType&&t,o=r&&r.exports===e,i=o&&wo.process,a=function(){try{var t=r&&r.require&&r.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=a}),da=fa&&fa.isTypedArray,ha=da?sa(da):ca,la=ha,pa=Object.prototype,va=pa.hasOwnProperty,ya=at,ga=Object.prototype,ba=ut,_a=ct,ma=_a(Object.keys,Object),wa=ma,Ea=Object.prototype,ja=Ea.hasOwnProperty,xa=st,ka=ft,Ma=dt,Aa=ht,Oa=lt,Na=Object.prototype,Pa=Na.hasOwnProperty,La=pt,Ia=vt,Ca=yt,Sa=s(function(t,n){function e(t,n){if(n)return t.slice();var e=t.length,r=u?u(e):new t.constructor(e);return t.copy(r),r}var r=n&&!n.nodeType&&n,o=r&&!0&&t&&!t.nodeType&&t,i=o&&o.exports===r,a=i?xo.Buffer:void 0,u=a?a.allocUnsafe:void 0;t.exports=e}),za=gt,Da=bt,Fa=_t,Ua=Object.prototype,Ta=Ua.propertyIsEnumerable,Va=Object.getOwnPropertySymbols,Ba=Va?function(t){return null==t?[]:(t=Object(t),Da(Va(t),function(n){return Ta.call(t,n)}))}:Fa,Ga=Ba,qa=mt,Ra=wt,Wa=_a(Object.getPrototypeOf,Object),$a=Wa,Ya=Object.getOwnPropertySymbols,Za=Ya?function(t){for(var n=[];t;)Ra(n,Ga(t)),t=$a(t);return n}:Fa,Xa=Za,Ja=Et,Ka=jt,Qa=xt,Ha=kt,tu=ui(xo,"DataView"),nu=tu,eu=ui(xo,"Promise"),ru=eu,ou=ui(xo,"Set"),iu=ou,au=ui(xo,"WeakMap"),uu=au,cu=Ko(nu),su=Ko(si),fu=Ko(ru),du=Ko(iu),hu=Ko(uu),lu=Uo;(nu&&"[object DataView]"!=lu(new nu(new ArrayBuffer(1)))||si&&"[object Map]"!=lu(new si)||ru&&"[object Promise]"!=lu(ru.resolve())||iu&&"[object Set]"!=lu(new iu)||uu&&"[object WeakMap]"!=lu(new uu))&&(lu=function(t){var n=Uo(t),e="[object Object]"==n?t.constructor:void 0,r=e?Ko(e):"";if(r)switch(r){case cu:return"[object DataView]";case su:return"[object Map]";case fu:return"[object Promise]";case du:return"[object Set]";case hu:return"[object WeakMap]"}return n});var pu=lu,vu=Object.prototype,yu=vu.hasOwnProperty,gu=Mt,bu=xo.Uint8Array,_u=bu,mu=At,wu=Ot,Eu=/\w*$/,ju=Nt,xu=Mo?Mo.prototype:void 0,ku=xu?xu.valueOf:void 0,Mu=Pt,Au=Lt,Ou="[object Boolean]",Nu="[object Date]",Pu="[object Map]",Lu="[object Number]",Iu="[object RegExp]",Cu="[object Set]",Su="[object String]",zu="[object Symbol]",Du="[object ArrayBuffer]",Fu="[object DataView]",Uu="[object Float32Array]",Tu="[object Float64Array]",Vu="[object Int8Array]",Bu="[object Int16Array]",Gu="[object Int32Array]",qu="[object Uint8Array]",Ru="[object Uint8ClampedArray]",Wu="[object Uint16Array]",$u="[object Uint32Array]",Yu=It,Zu=Object.create,Xu=function(){function t(){}return function(n){if(!To(n))return{};if(Zu)return Zu(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}(),Ju=Xu,Ku=Ct,Qu="[object Map]",Hu=St,tc=fa&&fa.isMap,nc=tc?sa(tc):Hu,ec=nc,rc="[object Set]",oc=zt,ic=fa&&fa.isSet,ac=ic?sa(ic):oc,uc=ac,cc=1,sc=2,fc=4,dc="[object Arguments]",hc="[object Function]",lc="[object GeneratorFunction]",pc="[object Object]",vc={};vc[dc]=vc["[object Array]"]=vc["[object ArrayBuffer]"]=vc["[object DataView]"]=vc["[object Boolean]"]=vc["[object Date]"]=vc["[object Float32Array]"]=vc["[object Float64Array]"]=vc["[object Int8Array]"]=vc["[object Int16Array]"]=vc["[object Int32Array]"]=vc["[object Map]"]=vc["[object Number]"]=vc[pc]=vc["[object RegExp]"]=vc["[object Set]"]=vc["[object String]"]=vc["[object Symbol]"]=vc["[object Uint8Array]"]=vc["[object Uint8ClampedArray]"]=vc["[object Uint16Array]"]=vc["[object Uint32Array]"]=!0,vc["[object Error]"]=vc[hc]=vc["[object WeakMap]"]=!1;var yc=Dt,gc=4,bc=Ft,_c=Ut,mc=Tt,wc=mc(),Ec=wc,jc=Vt,xc=Bt,kc=xc(jc),Mc=kc,Ac=Gt,Oc=qt,Nc=Rt,Pc=Nc,Lc=Wt,Ic="__lodash_hash_undefined__",Cc=$t,Sc=Yt;Zt.prototype.add=Zt.prototype.push=Cc,Zt.prototype.has=Sc;var zc=Zt,Dc=Xt,Fc=Jt,Uc=1,Tc=2,Vc=Kt,Bc=Qt,Gc=Ht,qc=1,Rc=2,Wc="[object Boolean]",$c="[object Date]",Yc="[object Error]",Zc="[object Map]",Xc="[object Number]",Jc="[object RegExp]",Kc="[object Set]",Qc="[object String]",Hc="[object Symbol]",ts="[object ArrayBuffer]",ns="[object DataView]",es=Mo?Mo.prototype:void 0,rs=es?es.valueOf:void 0,os=tn,is=1,as=Object.prototype,us=as.hasOwnProperty,cs=nn,ss=1,fs="[object Arguments]",ds="[object Array]",hs="[object Object]",ls=Object.prototype,ps=ls.hasOwnProperty,vs=en,ys=rn,gs=1,bs=2,_s=on,ms=an,ws=un,Es=cn,js=sn,xs="[object Symbol]",ks=fn,Ms=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,As=/^\w*$/,Os=dn,Ns="Expected a function";hn.Cache=Li;var Ps,Ls=hn,Is=500,Cs=ln,Ss=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zs=/\\(\\)?/g,Ds=Cs(function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(Ss,function(t,e,r,o){n.push(r?o.replace(zs,"$1"):e||t)}),n}),Fs=Ds,Us=pn,Ts=1/0,Vs=Mo?Mo.prototype:void 0,Bs=Vs?Vs.toString:void 0,Gs=vn,qs=yn,Rs=gn,Ws=1/0,$s=bn,Ys=_n,Zs=mn,Xs=wn,Js=En,Ks=jn,Qs=1,Hs=2,tf=xn,nf=kn,ef=Mn,rf=An,of=On,af=Nn,uf=Object.prototype,cf=uf.hasOwnProperty,sf=Pn,ff=Ln,df="[object Map]",hf="[object Set]",lf=Object.prototype,pf=lf.hasOwnProperty,vf=In,yf=Cn,gf=Sn,bf=zn,_f=Dn,mf=Fn,wf=Un,Ef="[object String]",jf=Tn,xf=nf("length"),kf=xf,Mf=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Af=Vn,Of="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Nf="\\ud83c[\\udffb-\\udfff]",Pf="(?:\\ud83c[\\udde6-\\uddff]){2}",Lf="[\\ud800-\\udbff][\\udc00-\\udfff]",If="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Cf="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",Pf,Lf].join("|")+")[\\ufe0e\\ufe0f]?"+If+")*",Sf="[\\ufe0e\\ufe0f]?"+If+Cf,zf="(?:"+["[^\\ud800-\\udfff]"+Of+"?",Of,Pf,Lf,"[\\ud800-\\udfff]"].join("|")+")",Df=RegExp(Nf+"(?="+Nf+")|"+zf+Sf,"g"),Ff=Bn,Uf=Gn,Tf="[object Map]",Vf="[object Set]",Bf=qn,Gf=Rn,qf=Mo?Mo.isConcatSpreadable:void 0,Rf=Wn,Wf=$n,$f=Yn,Yf=Math.max,Zf=Zn,Xf=Fi?function(t,n){return Fi(t,"toString",{configurable:!0,enumerable:!1,value:_c(n),writable:!0})}:Ac,Jf=Xf,Kf=800,Qf=16,Hf=Date.now,td=Xn,nd=td(Jf),ed=nd,rd=Jn,od=Kn,id=Qn,ad=Hn,ud=te,cd=ne,sd=ee,fd=re,dd=iu&&1/Gc(new iu([,-0]))[1]==1/0?function(t){return new iu(t)}:fd,hd=dd,ld=200,pd=oe,vd=ie,yd=rd(function(t){return pd(Wf(t,1,vd,!0))}),gd=yd,bd=ae,_d=ue;if("function"==typeof c)try{Ps={clone:bc,constant:_c,each:Pc,filter:af,has:ff,isArray:Hi,isEmpty:vf,isFunction:Ro,isUndefined:yf,keys:Ma,map:bf,reduce:wf,size:Bf,transform:Gf,union:gd,values:_d}}catch(t){}Ps||(Ps=window._);var md=Ps,wd=ce,Ed="\0",jd="\0",xd="";ce.prototype._nodeCount=0,ce.prototype._edgeCount=0,ce.prototype.isDirected=function(){return this._isDirected},ce.prototype.isMultigraph=function(){return this._isMultigraph},ce.prototype.isCompound=function(){return this._isCompound},ce.prototype.setGraph=function(t){return this._label=t,this},ce.prototype.graph=function(){return this._label},ce.prototype.setDefaultNodeLabel=function(t){return md.isFunction(t)||(t=md.constant(t)),this._defaultNodeLabelFn=t,this},ce.prototype.nodeCount=function(){return this._nodeCount},ce.prototype.nodes=function(){return md.keys(this._nodes)},ce.prototype.sources=function(){var t=this;return md.filter(this.nodes(),function(n){return md.isEmpty(t._in[n])})},ce.prototype.sinks=function(){var t=this;return md.filter(this.nodes(),function(n){return md.isEmpty(t._out[n])})},ce.prototype.setNodes=function(t,n){var e=arguments,r=this;return md.each(t,function(t){e.length>1?r.setNode(t,n):r.setNode(t)}),this},ce.prototype.setNode=function(t,n){return md.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=jd,this._children[t]={},this._children[jd][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},ce.prototype.node=function(t){return this._nodes[t]},ce.prototype.hasNode=function(t){return md.has(this._nodes,t)},ce.prototype.removeNode=function(t){var n=this;if(md.has(this._nodes,t)){var e=function(t){n.removeEdge(n._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],md.each(this.children(t),function(t){n.setParent(t)}),delete this._children[t]),md.each(md.keys(this._in[t]),e),delete this._in[t],delete this._preds[t],md.each(md.keys(this._out[t]),e),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},ce.prototype.setParent=function(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(md.isUndefined(n))n=jd;else{n+="";for(var e=n;!md.isUndefined(e);e=this.parent(e))if(e===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this},ce.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},ce.prototype.parent=function(t){if(this._isCompound){var n=this._parent[t];if(n!==jd)return n}},ce.prototype.children=function(t){if(md.isUndefined(t)&&(t=jd),this._isCompound){var n=this._children[t];if(n)return md.keys(n)}else{if(t===jd)return this.nodes();if(this.hasNode(t))return[]}},ce.prototype.predecessors=function(t){var n=this._preds[t];if(n)return md.keys(n)},ce.prototype.successors=function(t){var n=this._sucs[t];if(n)return md.keys(n)},ce.prototype.neighbors=function(t){var n=this.predecessors(t);if(n)return md.union(n,this.successors(t))},ce.prototype.isLeaf=function(t){var n;return n=this.isDirected()?this.successors(t):this.neighbors(t),0===n.length},ce.prototype.filterNodes=function(t){function n(t){var i=r.parent(t);return void 0===i||e.hasNode(i)?(o[t]=i,i):i in o?o[i]:n(i)}var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var r=this;md.each(this._nodes,function(n,r){t(r)&&e.setNode(r,n)}),md.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,r.edge(t))});var o={};return this._isCompound&&md.each(e.nodes(),function(t){e.setParent(t,n(t))}),e},ce.prototype.setDefaultEdgeLabel=function(t){return md.isFunction(t)||(t=md.constant(t)),this._defaultEdgeLabelFn=t,this},ce.prototype.edgeCount=function(){return this._edgeCount},ce.prototype.edges=function(){return md.values(this._edgeObjs)},ce.prototype.setPath=function(t,n){var e=this,r=arguments;return md.reduce(t,function(t,o){return r.length>1?e.setEdge(t,o,n):e.setEdge(t,o),o}),this},ce.prototype.setEdge=function(){var t,n,e,r,o=!1,i=arguments[0];"object"==typeof i&&null!==i&&"v"in i?(t=i.v,n=i.w,e=i.name,2===arguments.length&&(r=arguments[1],o=!0)):(t=i,n=arguments[1],e=arguments[3],arguments.length>2&&(r=arguments[2],o=!0)),t=""+t,n=""+n,md.isUndefined(e)||(e=""+e);var a=de(this._isDirected,t,n,e);if(md.has(this._edgeLabels,a))return o&&(this._edgeLabels[a]=r),this;if(!md.isUndefined(e)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[a]=o?r:this._defaultEdgeLabelFn(t,n,e);var u=he(this._isDirected,t,n,e);return t=u.v,n=u.w,Object.freeze(u),this._edgeObjs[a]=u,se(this._preds[n],t),se(this._sucs[t],n),this._in[n][a]=u,this._out[t][a]=u,this._edgeCount++,this},ce.prototype.edge=function(t,n,e){var r=1===arguments.length?le(this._isDirected,arguments[0]):de(this._isDirected,t,n,e);return this._edgeLabels[r]},ce.prototype.hasEdge=function(t,n,e){var r=1===arguments.length?le(this._isDirected,arguments[0]):de(this._isDirected,t,n,e);return md.has(this._edgeLabels,r)},ce.prototype.removeEdge=function(t,n,e){var r=1===arguments.length?le(this._isDirected,arguments[0]):de(this._isDirected,t,n,e),o=this._edgeObjs[r];return o&&(t=o.v,n=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],fe(this._preds[n],t),fe(this._sucs[t],n),delete this._in[n][r],delete this._out[t][r],this._edgeCount--),this},ce.prototype.inEdges=function(t,n){var e=this._in[t];if(e){var r=md.values(e);return n?md.filter(r,function(t){return t.v===n}):r}},ce.prototype.outEdges=function(t,n){var e=this._out[t];if(e){var r=md.values(e);return n?md.filter(r,function(t){return t.w===n}):r}},ce.prototype.nodeEdges=function(t,n){var e=this.inEdges(t,n);if(e)return e.concat(this.outEdges(t,n))};var kd={Graph:wd,version:"2.1.7"},Md={write:pe,read:ge},Ad=be,Od=_e;_e.prototype.size=function(){return this._arr.length},_e.prototype.keys=function(){return this._arr.map(function(t){return t.key})},_e.prototype.has=function(t){return md.has(this._keyIndices,t)},_e.prototype.priority=function(t){var n=this._keyIndices[t];if(void 0!==n)return this._arr[n].priority},_e.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},_e.prototype.add=function(t,n){var e=this._keyIndices;if(t=String(t),!md.has(e,t)){var r=this._arr,o=r.length;return e[t]=o,r.push({key:t,priority:n}),this._decrease(o),!0}return!1},_e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},_e.prototype.decrease=function(t,n){var e=this._keyIndices[t];if(n>this._arr[e].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[e].priority+" New: "+n);this._arr[e].priority=n,this._decrease(e)},_e.prototype._heapify=function(t){var n=this._arr,e=2*t,r=e+1,o=t;e<n.length&&(o=n[e].priority<n[o].priority?e:o,r<n.length&&(o=n[r].priority<n[o].priority?r:o),o!==t&&(this._swap(t,o),this._heapify(o)))},
_e.prototype._decrease=function(t){for(var n,e=this._arr,r=e[t].priority;0!==t&&(n=t>>1,!(e[n].priority<r));)this._swap(t,n),t=n},_e.prototype._swap=function(t,n){var e=this._arr,r=this._keyIndices,o=e[t],i=e[n];e[t]=i,e[n]=o,r[i.key]=t,r[o.key]=n};var Nd=me,Pd=md.constant(1),Ld=Ee,Id=je,Cd=xe,Sd=ke,zd=md.constant(1),Dd=Ae;Ae.CycleException=Oe,Oe.prototype=new Error;var Fd=Ne,Ud=Pe,Td=Ie,Vd=Ce,Bd=Se,Gd={components:Ad,dijkstra:Nd,dijkstraAll:Ld,findCycles:Cd,floydWarshall:Sd,isAcyclic:Fd,postorder:Td,preorder:Vd,prim:Bd,tarjan:Id,topsort:Dd},qd={Graph:kd.Graph,json:Md,alg:Gd,version:kd.version},Rd=qd.Graph,Wd=qd.alg,$d=function(){function t(t){var i=t.selection?t.selection():t;i.select("text").empty()&&(i.append("title"),i.append("line").attr("x1",0).attr("x2",0),i.append("rect").attr("class","node-body"),i.append("text").attr("class","node-value").attr("dy",".35em").attr("text-anchor","middle"),i.append("text").attr("class","node-title").attr("dy",".35em"),i.append("rect").attr("class","node-click-target").attr("x",-5).attr("y",-5).attr("width",10).style("fill","none").style("visibility","hidden").style("pointer-events","all"),i.attr("transform",Jr)),i.each(function(a){function u(t){var n=p,e=n.titleAbove?-10:(t.y1-t.y0)/2;return"translate("+(n.titleAbove?n.right?4:-4:n.right?-4:t.x1-t.x0+4)+","+e+")"}var c=o.select(this).select("title"),s=o.select(this).select(".node-value"),f=o.select(this).select(".node-title"),d=o.select(this).select("line"),h=o.select(this).select(".node-body"),l=o.select(this).select(".node-click-target"),p=Kr(a);p.dy=a.y0===a.y1?0:Math.max(1,a.y1-a.y0);var v=a.x1-a.x0>2,y=n(a)+(!v&&e(a)?" ("+e(a)+")":"");c.text(y),s.text(e).style("display",v?"inline":"none"),f.attr("text-anchor",p.right?"end":"start").text(y).each(Qr,100),t!==i&&(f=f.transition(t),d=d.transition(t),h=h.transition(t),l=l.transition(t)),t.attr("transform",Jr),d.attr("y1",function(t){return p.titleAbove?-5:0}).attr("y2",function(t){return p.dy}).style("display",function(t){return t.y0!==t.y1&&r(t)?"inline":"none"}),l.attr("height",function(t){return p.dy+5}),h.attr("width",function(t){return t.x1-t.x0}).attr("height",function(t){return p.dy}),f.attr("transform",u).style("display",function(t){return t.y0!==t.y1&&r(t)?"inline":"none"}),s.style("font-size",function(t){return Math.min(t.x1-t.x0-4,t.y1-t.y0-4)+"px"}).attr("transform",function(t){var n=t.x1-t.x0,e=t.y1-t.y0;return"translate("+n/2+","+e/2+") rotate("+(n>e?0:-90)+")"})})}var n=function(t){return void 0!==t.title?t.title:t.id},e=function(t){return null},r=function(t){return!!n(t)};return t.nodeVisible=function(n){return arguments.length?(r=Hr(n),t):r},t.nodeTitle=function(e){return arguments.length?(n=Hr(e),t):n},t.nodeValue=function(n){return arguments.length?(e=Hr(n),t):e},t};t.sankey=Ur,t.sankeyPositionJustified=pr,t.sankeyPositionRelaxation=Rr,t.sankeyLink=Zr,t.sankeyNode=$d,t.sankeyDiagram=eo,t.sankeyLinkTitle=no,Object.defineProperty(t,"__esModule",{value:!0})});